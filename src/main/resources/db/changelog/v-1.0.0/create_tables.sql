CREATE TABLE products (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    GTIN VARCHAR UNIQUE,
    name VARCHAR
);

CREATE TABLE catalog_state (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    actualize_moment TIMESTAMP NOT NULL
);

CREATE TABLE orders (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    create_date TIMESTAMP NOT NULL,
    product_id BIGINT REFERENCES products(id),
    quantity INT,
    state VARCHAR
);

CREATE TABLE code_bundle (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  order_id BIGINT REFERENCES orders(id) NOT NULL,
  code_bundle TEXT NOT NULL
);
